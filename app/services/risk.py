RISK_WEIGHTS = {
    "legal": "???????????",
    "financial": "???????",
    "reputation": "???????",
    "operational": "???????",
    "structural": "?????????",
}


def calculate_risks(company: dict, bankruptcy: dict, news_items: list):
    risks = []

    status = (company.get("status") or "").lower()
    if "??????" in status or "???????" in status:
        risks.append({
            "category": "???????????",
            "weight": RISK_WEIGHTS["legal"],
            "reason": f"?????? ????????: {company.get('status')}",
            "source": "???",
        })

    if bankruptcy.get("found"):
        risks.append({
            "category": "???????????",
            "weight": RISK_WEIGHTS["legal"],
            "reason": "??????? ???????? ??????????? ? ?????",
            "source": "?????",
        })

    negative_news = [n for n in news_items if n.get("negative")]
    if negative_news:
        risks.append({
            "category": "?????????????",
            "weight": RISK_WEIGHTS["reputation"],
            "reason": f"?????????? ?????????? ? ????????: {len(negative_news)}",
            "source": "???????",
        })

    if not risks:
        risks.append({
            "category": "?????? ????",
            "weight": "??????",
            "reason": "??????????? ???????? ?? ?????????? ?? ????????? ??????????",
            "source": "???????",
        })

    return risks
