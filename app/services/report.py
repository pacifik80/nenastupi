from datetime import datetime


def build_report(company: dict, risks: list, news_items: list):
    lines = []
    lines.append(f"????? ???????????: {datetime.utcnow().strftime('%Y-%m-%d %H:%M UTC')}")
    lines.append(f"????????: {company.get('name_full')} (???? {company.get('ogrn')})")
    if company.get("status"):
        lines.append(f"??????: {company.get('status')}")

    lines.append("
???????? ?????:")
    for r in risks[:5]:
        lines.append(f"- {r['category']} ({r['weight']}): {r['reason']} [{r['source']}]")

    lines.append("
??????? (????????? 90 ????):")
    if news_items:
        for n in news_items[:5]:
            lines.append(f"- {n.get('title')} ({n.get('link')})")
    else:
        lines.append("- ??? ????????? ??????????")

    lines.append("
????????????:")
    lines.append("- ??????? ????????? ???????? ? ????? ????? ??????????? ????????")
    lines.append("- ????????? ? ???????????? ????? ???????? ?????????? ? ???????? ? ????????????")

    return "
".join(lines)
